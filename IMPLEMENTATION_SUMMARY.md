# ラベル管理システム実装のまとめ

## 実装完了した機能

### 1. ラベル管理システム ✅

- **`label_loader.py`**: ラベルファイルを読み込むクラス
  - JSONファイルから画像ファイル名と正解キーワード（複数）を読み込み
  - カテゴリ情報とヒント情報も取得可能

- **`labels.json`**: ラベルデータファイル
  - 画像ファイル名をキーとして、正解リスト、カテゴリ、ヒントを管理
  - 既存の20枚の画像に対してラベルを設定済み

### 2. GameEngine の拡張 ✅

- **複数の正解キーワードに対応**
  - `answers` リストのいずれかに一致すれば正解と判定
  - 英語・日本語の混在に対応

- **ラベルファイルから正解を読み込み**
  - ファイル名から自動抽出する方式から、ラベルファイルベースに変更
  - フォールバック機能（ラベルがない場合はファイル名から推測）

- **カテゴリとヒント情報の取得**
  - `get_category()`: カテゴリ情報を取得
  - `get_hint()`: ヒント情報を取得

### 3. UI機能の追加 ✅

- **ヒント表示エリア**
  - カテゴリ情報を表示（例: "カテゴリ: 動物"）
  - ヒントテキストを表示（例: "💡 空を飛ぶ生き物です"）
  - 画像読み込み時に自動更新

### 4. サポートツール ✅

- **`create_label_template.py`**: ラベルテンプレート生成スクリプト
  - `images` フォルダ内の画像ファイルから自動でテンプレートを生成
  - 既存のラベルファイルと統合

- **`LABEL_MANAGEMENT_GUIDE.md`**: ラベル管理ガイド
  - ラベルファイルの編集方法
  - 設定例と注意事項

## ファイル構成

```
visual-guess-challenge/
├── label_loader.py          # ラベルローダークラス（新規）
├── labels.json              # ラベルデータファイル（新規）
├── create_label_template.py # テンプレート生成スクリプト（新規）
├── LABEL_MANAGEMENT_GUIDE.md # ラベル管理ガイド（新規）
├── game_engine.py           # 拡張（ラベル対応）
├── main.py                  # 拡張（ヒント表示UI追加）
└── images/                  # 画像フォルダ
    ├── a-bird1.jpg
    ├── a-cat1.jpg
    └── ...
```

## 使い方

### 1. ラベルファイルの編集

`labels.json` を編集して、各画像の正解キーワード、カテゴリ、ヒントを設定：

```json
{
  "a-bird1.jpg": {
    "answers": ["bird", "鳥", "とり"],
    "category": "動物",
    "hint": "空を飛ぶ生き物です"
  }
}
```

### 2. 新しい画像を追加した場合

1. 画像を `images/` フォルダに追加
2. `python create_label_template.py` を実行してテンプレートを生成
3. `labels.json` を編集して正解キーワードなどを設定

### 3. ゲームの実行

```bash
python main.py
```

- ラベルファイルから正解が読み込まれます
- 複数の正解キーワード（英語・日本語）のいずれでも正解と判定されます
- カテゴリとヒントがゲーム画面に表示されます

## 特徴

### ✅ 複数の正解に対応

1つの画像に対して複数の正解キーワードを設定可能：
- `["bird", "鳥", "とり"]` → いずれを入力しても正解

### ✅ 日本語・英語の混在対応

英語と日本語の正解を同じリストに設定可能：
- 英語のみ: `["cat", "kitten"]`
- 日本語のみ: `["猫", "ねこ"]`
- 混在: `["cat", "猫", "ねこ"]`

### ✅ カテゴリとヒント機能

- カテゴリ: ゲーム画面の上部に表示（例: "カテゴリ: 動物"）
- ヒント: 画像の下に表示（例: "💡 空を飛ぶ生き物です"）

### ✅ 手動ラベル管理

ファイル名から自動抽出ではなく、手動でラベルを管理できるため：
- より正確な正解設定が可能
- 複数の表記に対応
- カテゴリやヒント情報も管理可能

## 設定例

### 現在のデータセット

`labels.json` には20枚の画像が登録されています：

- **動物** (5枚): bird, cat, dog, horse, rabbit
- **果物** (5枚): grape, lemon, pear, pineapple, strawberry
- **食べ物** (5枚): bread, friedpotato, pizza, riceball, takoyaki
- **乗り物** (5枚): airplane, bus, motorbike, ship, train

各画像には、英語・日本語の正解キーワード、カテゴリ、ヒントが設定済みです。

## 次のステップ

1. **ラベルの追加・編集**: `labels.json` を編集して正解キーワードを調整
2. **新しい画像の追加**: 画像を追加してラベルを設定
3. **ヒントの改善**: より分かりやすいヒント文を追加
4. **動作確認**: ゲームを実行して、正解判定とヒント表示が正しく動作するか確認

## トラブルシューティング

### Q: ラベルが表示されない
- `labels.json` のファイル名が正確か確認
- JSONの構文エラーがないか確認（カンマ、引用符など）

### Q: 正解と判定されない
- `answers` リストに正解キーワードが含まれているか確認
- 大文字小文字は関係ありませんが、スペースなどに注意

### Q: ヒントが表示されない
- `hint` フィールドが設定されているか確認
- 空文字列の場合は表示されません

